/*

*/

const int buttonPin = 9;     
const int ledPin1 =  2;
const int ledPin2 =  3;
const int ledPin3 =  4;
const int ledPin4 =  5;
const int ledPin5 =  6;
const int ledPin6 =  7;
const int ledPin7 =  8;

int timeDelayStart = 200;
int reaktiontestZeit; // Zeit bis die Lampen ausgehen
int reaktionZeit;
int start; // Beginn des Tests
int Dauer; // Zeit bis Zur Reaktion
int AnzeigeDelay = 2000;

void setup() {
    pinMode(ledPin1,OUTPUT);
    pinMode(ledPin2,OUTPUT);
    pinMode(ledPin3,OUTPUT);
    pinMode(ledPin4,OUTPUT);
    pinMode(ledPin5,OUTPUT);
    pinMode(ledPin6,OUTPUT);
    pinMode(ledPin7,OUTPUT);
    pinMode(buttonPin,INPUT);
    Serial.begin(9600);    
    startAnimation();
}

void reaktion()  // Lampen gehen an und dann nach zuf채lliger Zeit aus
{
  
  while (digitalRead(buttonPin) == HIGH) {
    1;
  }
  
digitalWrite(ledPin1, HIGH);
digitalWrite(ledPin2, HIGH);
digitalWrite(ledPin3, HIGH);
digitalWrite(ledPin4, HIGH);
digitalWrite(ledPin5, HIGH);
digitalWrite(ledPin6, HIGH);
digitalWrite(ledPin7, HIGH);
  
reaktiontestZeit = random(500, 10000);
delay(reaktiontestZeit);

digitalWrite(ledPin1, LOW);
digitalWrite(ledPin2, LOW);
digitalWrite(ledPin3, LOW);
digitalWrite(ledPin4, LOW);
digitalWrite(ledPin5, LOW);
digitalWrite(ledPin6, LOW);
digitalWrite(ledPin7, LOW);


     start = millis();
     while(digitalRead(buttonPin) == LOW)
     {
       1; // warten, solange Taste nicht gedrueckt
     }
     Dauer = millis() - start;
  
}

  void zeitAnzeige()  // f체r alle 0,1S Reaktionszeit eine LAmpe anmachen
{
  if (Dauer<= 100)
  {
    digitalWrite(ledPin1, HIGH);
    delay(AnzeigeDelay);
  }
  else if (Dauer<= 200)
  {
    digitalWrite(ledPin1, HIGH);
    digitalWrite(ledPin2, HIGH);
    delay(AnzeigeDelay);
  }
  else if (Dauer<= 300)
  {
    digitalWrite(ledPin1, HIGH);
    digitalWrite(ledPin2, HIGH);
    digitalWrite(ledPin3, HIGH);
    delay(AnzeigeDelay);
  }
  else if (Dauer<= 400)
  {
    digitalWrite(ledPin1, HIGH);
    digitalWrite(ledPin2, HIGH);
    digitalWrite(ledPin3, HIGH);
    digitalWrite(ledPin4, HIGH);
    delay(AnzeigeDelay);
  }
  else if (Dauer<= 500)
  {
    digitalWrite(ledPin1, HIGH);
    digitalWrite(ledPin2, HIGH);
    digitalWrite(ledPin3, HIGH);
    digitalWrite(ledPin4, HIGH);
    digitalWrite(ledPin5, HIGH);
    delay(AnzeigeDelay);
  }
   else if (Dauer<= 600)
  {
    digitalWrite(ledPin1, HIGH);
    digitalWrite(ledPin2, HIGH);
    digitalWrite(ledPin3, HIGH);
    digitalWrite(ledPin4, HIGH);
    digitalWrite(ledPin5, HIGH);
    digitalWrite(ledPin6, HIGH);
     delay(AnzeigeDelay);
  }
   else if (Dauer> 600)
  {
    digitalWrite(ledPin1, HIGH);
    digitalWrite(ledPin2, HIGH);
    digitalWrite(ledPin3, HIGH);
    digitalWrite(ledPin4, HIGH);
    digitalWrite(ledPin5, HIGH);
    digitalWrite(ledPin6, HIGH);
    digitalWrite(ledPin7, HIGH);
     delay(AnzeigeDelay);

  }  
}

void loop() {
    
  if(digitalRead(buttonPin)==HIGH) //Schalter gedr체ckt
  {  
    
    reaktion();
    zeitAnzeige();
  }
  else
  { 
    digitalWrite(ledPin1, LOW); // Solange Schalter nicht gedr체ckt alle Lampen aus
    digitalWrite(ledPin2, LOW);
    digitalWrite(ledPin3, LOW);
    digitalWrite(ledPin4, LOW);
    digitalWrite(ledPin5, LOW);
    digitalWrite(ledPin6, LOW);
    digitalWrite(ledPin7, LOW);  
  }
  Serial.println(digitalRead(7));   
}



void startAnimation() {  // Alle LAmpen gehen einmal an und dann aus
  digitalWrite(ledPin1, HIGH);
  delay(timeDelayStart);
  digitalWrite(ledPin1, LOW);
  
  digitalWrite(ledPin2, HIGH);
  delay(timeDelayStart);
  digitalWrite(ledPin2, LOW);
  
  digitalWrite(ledPin3, HIGH);
  delay(timeDelayStart);
  digitalWrite(ledPin3, LOW);
  
  digitalWrite(ledPin4, HIGH);
  delay(timeDelayStart);
  digitalWrite(ledPin4, LOW);
  
  digitalWrite(ledPin5, HIGH);
  delay(timeDelayStart);
  digitalWrite(ledPin5, LOW);
  
  digitalWrite(ledPin6, HIGH);
  delay(timeDelayStart);
  digitalWrite(ledPin6, LOW);
  
  digitalWrite(ledPin7, HIGH);
  delay(timeDelayStart);
  digitalWrite(ledPin7, LOW);
}
